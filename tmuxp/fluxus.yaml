session_name: fluxus
start_directory: /Users/opti-mac/Projects/opticoreit/fluxus/fluxus
env:
  DJANGO_SETTINGS_MODULE: fluxus.core.settings
  PYTHONUNBUFFERED: 1
windows:
  - window_name: editor
    start_directory: .
    panes:
      - shell_command:
          - printf "\033]2;nvim\007"
          - nvim .
        focus: true

  - window_name: services
    start_directory: .
    layout: tiled
    panes:
      - shell_command:
          - printf "\033]2;backend\007"
          - cd backend/
          - eval $(poetry env activate)
          - fluxus-server runserver 0.0.0.0:8000

      - shell_command:
          - printf "\033]2;frontend\007"
          - cd frontend
          - npm install
          - npm start

      - shell_command:
          - printf "\033]2;worker\007"
          - cd backend/fluxus/
          - eval $(poetry env activate)
          - fluxus-server celery -A core worker --loglevel=info --pool=solo --concurrency=1

  - window_name: lazygit
    start_directory: .
    panes:
      - shell_command:
          - printf "\033]2;lazygit\007"
          - lazygit
        focus: true
